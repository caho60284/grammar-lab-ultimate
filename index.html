<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>English Grammar AI Analyzer</title>

<style>
body{
font-family:system-ui;
background:#f4f7f6;
padding:18px;
color:#1f3d35;
}
h1{margin-bottom:6px}
.subtitle{color:#6b7f78;margin-bottom:18px}
textarea{
width:100%;
border-radius:14px;
border:1px solid #ccd7d3;
padding:14px;
font-size:18px;
min-height:110px;
}
button{
width:100%;
margin-top:14px;
padding:16px;
border:none;
border-radius:14px;
background:#3f6f60;
color:white;
font-size:18px;
}
.card{
background:white;
border-radius:14px;
padding:14px;
margin-top:14px;
box-shadow:0 2px 6px rgba(0,0,0,0.06);
}
table{width:100%;border-collapse:collapse}
th,td{padding:8px;border-bottom:1px solid #e6eeea}
</style>
</head>
<body>

<h1>üß† English Grammar AI Analyzer</h1>
<div class="subtitle">Analisis struktur + naturalitas + arti</div>

<textarea id="input">I go to school</textarea>
<button onclick="analyze()">Analyze</button>

<div id="result"></div>

<script>
async function analyze(){

const text=document.getElementById("input").value.trim()
if(!text)return

document.getElementById("result").innerHTML="Menganalisis..."

try{

const res=await fetch("https://api.allorigins.win/raw?url="+encodeURIComponent(
"https://grammar-ai-proxy.vercel.app/analyze?text="+encodeURIComponent(text)
))

const j=await res.json()

render(j)

}catch(e){
document.getElementById("result").innerHTML="‚ùå AI tidak bisa diakses"
}
}

function render(j){

let html=`<div class="card">
<table>
<tr><th>Bagian</th><th>Peran</th><th>Jenis</th><th>Penjelasan</th></tr>`

j.segments.forEach(s=>{
html+=`<tr>
<td>${s.text}</td>
<td>${s.role}</td>
<td>${s.type}</td>
<td>${s.explanation}</td>
</tr>`
})

html+=`</table></div>`

html+=`<div class="card"><b>Naturalitas:</b> ${j.natural}</div>`
html+=`<div class="card"><b>Meaning:</b> ${j.meaning}</div>`

if(j.rewrite){
html+=`<div class="card"><b>Rewrite:</b> ${j.rewrite}</div>`
}

if(j.idiom){
html+=`<div class="card"><b>Idiom:</b> ${j.idiom}</div>`
}

document.getElementById("result").innerHTML=html
}
</script>

</body>
</html>