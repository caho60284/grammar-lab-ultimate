<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>English Grammar Structure Analyzer</title>

<style>
body{
font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
background:#f4f6f8;
margin:0;
padding:18px;
}

.container{max-width:900px;margin:auto;}

h1{color:#2f6f5e;font-size:26px;margin-bottom:14px}

textarea{
width:100%;
padding:16px;
border-radius:14px;
border:1px solid #d6dde2;
font-size:18px;
min-height:120px;
box-sizing:border-box;
}

button{
margin-top:14px;
padding:14px;
border:none;
border-radius:14px;
background:#2f6f5e;
color:white;
font-size:18px;
width:100%;
}

.card{
margin-top:16px;
background:white;
border-radius:16px;
padding:14px;
box-shadow:0 3px 10px rgba(0,0,0,0.06);
}

table{width:100%;border-collapse:collapse}
th,td{padding:10px;border-bottom:1px solid #eef2f4;text-align:left}
th{background:#eef3f1;color:#2f6f5e}

.meaning{background:#eef6f3;padding:10px;border-radius:10px}
</style>
</head>

<body>
<div class="container">

<h1>English Grammar Structure Analyzer</h1>

<textarea id="input" placeholder="Tulis kalimat Inggris..."></textarea>
<button onclick="analyze()">Analyze</button>

<div class="card">
<table>
<thead>
<tr>
<th>Bagian</th>
<th>Peran</th>
<th>Jenis</th>
<th>Penjelasan</th>
</tr>
</thead>
<tbody id="out"></tbody>
</table>
</div>

<div class="card">
<b>Meaning kalimat</b>
<div id="meaning" class="meaning">-</div>
</div>

<div class="card">
<b>Idiom / Phrase</b>
<div id="idiom" class="meaning">-</div>
</div>

</div>

<script>

function analyze(){

const text=document.getElementById("input").value.trim()
const out=document.getElementById("out")
const meaningBox=document.getElementById("meaning")
const idiomBox=document.getElementById("idiom")

out.innerHTML=""
meaningBox.innerHTML="-"
idiomBox.innerHTML="-"

if(!text)return

const norm=text
.replace(/â€™/g,"'")
.replace(/I'm/gi,"I am")
.toLowerCase()

const words=norm.split(/\s+/)

const be=["am","is","are","was","were"]
const modals=["can","could","will","would","should","may","might","must"]

let subject=null
let verb=null
let complement=null
let clause=null

// SUBJECT
if(words.includes("i"))subject="I"

// VERB
for(let w of words){
if(be.includes(w)||modals.includes(w)){
verb=w
break
}
}

// COMPLEMENT
if(verb && be.includes(verb)){
let idx=words.indexOf(verb)
complement=words.slice(idx+1).join(" ")
}

// CLAUSE (modal in complement)
if(complement){
let parts=complement.split(" ")
for(let i=0;i<parts.length;i++){
if(modals.includes(parts[i])){
clause=parts.slice(i).join(" ")
complement=parts.slice(0,i).join(" ")
break
}
}
}

// OUTPUT ROW
function row(a,b,c,d){
out.innerHTML+=`<tr>
<td>${a}</td>
<td>${b}</td>
<td>${c}</td>
<td>${d}</td>
</tr>`
}

if(subject)row("I","Subjek utama","Kata ganti","Pelaku utama kalimat")
if(verb)row(verb,"Kata kerja utama","Verb","Predikat utama")
if(complement)row(complement,"Pelengkap","Adjective phrase","Menjelaskan subjek")
if(clause)row(clause,"Klausa bawahan","Subordinate clause","Informasi tambahan")

// =====================
// MEANING ENGINE
// =====================
let meaning=text

meaning=meaning
.replace(/I am/gi,"Aku")
.replace(/I'm/gi,"Aku")
.replace(/so happy/gi,"sangat senang")
.replace(/could/gi,"bisa")
.replace(/make it/gi,"datang")
.replace(/very/gi,"sangat")

meaningBox.innerHTML=meaning

// =====================
// IDIOM ENGINE
// =====================
let idioms={
"make it":"berhasil / bisa datang",
"give up":"menyerah",
"take off":"lepas landas",
"look for":"mencari"
}

for(let k in idioms){
if(norm.includes(k)){
idiomBox.innerHTML=k+" = "+idioms[k]
break
}
}

}

</script>
</body>
</html>