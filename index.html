<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>English Grammar Structure Analyzer</title>

<style>
body{
font-family:system-ui,-apple-system,Segoe UI,Roboto;
background:#f4f7f6;
margin:0;
padding:16px;
color:#1f2d2a;
}

h1{
color:#2f6f5e;
margin-bottom:6px;
}

.subtitle{
color:#6b7c78;
margin-bottom:18px;
}

textarea{
width:100%;
min-height:110px;
border-radius:14px;
border:1px solid #cfd8d5;
padding:14px;
font-size:18px;
box-sizing:border-box;
}

button{
width:100%;
margin-top:14px;
background:#3f6f5f;
color:white;
border:none;
padding:14px;
border-radius:14px;
font-size:18px;
}

.card{
background:white;
border-radius:16px;
padding:14px;
margin-top:16px;
box-shadow:0 4px 10px rgba(0,0,0,.05);
}

table{
width:100%;
border-collapse:collapse;
font-size:15px;
}

th{
text-align:left;
background:#e6efec;
padding:10px;
color:#2f6f5e;
}

td{
padding:10px;
border-top:1px solid #e6efec;
vertical-align:top;
}

.meaning{
background:#e8f0ed;
padding:12px;
border-radius:10px;
margin-top:8px;
}
</style>
</head>

<body>

<h1>English Grammar Structure Analyzer</h1>
<div class="subtitle">Analisis struktur kalimat Inggris lengkap</div>

<textarea id="input" placeholder="Ketik kalimat Inggris..."></textarea>
<button onclick="analyze()">Analyze</button>

<div id="result"></div>

<script>
function analyze(){
let text=document.getElementById("input").value.trim();
if(!text) return;

let words=text.replace(/[.,!?]/g,"").split(/\s+/);
let rows=[];
let meaning="";
let idiom="â€”";

// ===== DETEKSI TIPE KALIMAT =====
let lower=text.toLowerCase();

// Imperative: Let me / Let us
if(lower.startsWith("let ")){
rows.push(["Let","Predikat","Verb (imperatif)","Kata kerja perintah / izin"]);
rows.push(["me","Objek","Kata ganti objek","Orang yang menerima aksi"]);
rows.push([words.slice(2).join(" "),"Frasa verba","Verb phrase","Tindakan yang dilakukan"]);

meaning="Biarkan saya " + words.slice(2).join(" ");
}

// Subject + be + adjective
else if(words.length>=3 && ["am","is","are","was","were"].includes(words[1].toLowerCase())){
rows.push([words[0],"Subjek","Kata ganti / noun","Pelaku kalimat"]);
rows.push([words[1],"Predikat","Linking verb","Penghubung subjek dan sifat"]);
rows.push([words.slice(2).join(" "),"Pelengkap","Adjective phrase","Sifat / keadaan subjek"]);

meaning=translateSimple(words[0])+" "+translateAdj(words.slice(2).join(" "));
}

// Modal clause
else if(words.includes("could")||words.includes("can")||words.includes("will")||words.includes("should")){
let idx=words.findIndex(w=>["could","can","will","should"].includes(w));
rows.push([words.slice(0,idx).join(" "),"Klausa utama","Main clause","Bagian utama kalimat"]);
rows.push([words.slice(idx).join(" "),"Klausa modal","Modal clause","Kemampuan / kemungkinan"]);

meaning="(makna tergantung konteks)";
}

// Simple SVO
else if(words.length>=2){
rows.push([words[0],"Subjek","Noun / pronoun","Pelaku"]);
rows.push([words[1],"Predikat","Verb","Tindakan"]);
if(words.length>2){
rows.push([words.slice(2).join(" "),"Objek / pelengkap","Object phrase","Yang dikenai tindakan"]);
}
meaning="(terjemahan sederhana)";
}

// Idiom sederhana
if(lower.includes("make it")){
idiom="make it = berhasil / bisa datang / tercapai";
}

// ===== RENDER =====
let html=`<div class="card">
<table>
<tr><th>Bagian</th><th>Peran</th><th>Jenis</th><th>Penjelasan</th></tr>`;
rows.forEach(r=>{
html+=`<tr><td>${r[0]}</td><td>${r[1]}</td><td>${r[2]}</td><td>${r[3]}</td></tr>`;
});
html+=`</table></div>`;

html+=`<div class="card"><b>Meaning kalimat</b>
<div class="meaning">${meaning}</div></div>`;

html+=`<div class="card"><b>Idiom / Phrase</b>
<div class="meaning">${idiom}</div></div>`;

document.getElementById("result").innerHTML=html;
}

// ===== TERJEMAHAN SEDERHANA =====
function translateSimple(w){
let m={
"i":"aku",
"you":"kamu",
"he":"dia",
"she":"dia",
"they":"mereka",
"we":"kami"
};
return m[w.toLowerCase()]||w;
}

function translateAdj(adj){
let m={
"happy":"senang",
"sad":"sedih",
"hungry":"lapar",
"sleepy":"mengantuk",
"thirsty":"haus",
"angry":"marah"
};
return m[adj.toLowerCase()]||adj;
}
</script>

</body>
</html>