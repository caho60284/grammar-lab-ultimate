<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>English Grammar Analyzer</title>

<style>
body{
font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto;
background:#f4f6f5;
margin:0;
display:flex;
justify-content:center;
}

.container{
max-width:680px;
width:100%;
padding:24px 18px 60px;
}

h1{
font-size:34px;
margin:10px 0 4px;
color:#2f4f44;
}

.sub{
color:#7a8b85;
margin-bottom:18px;
}

textarea{
width:100%;
border-radius:16px;
border:2px solid #d9e1dd;
padding:16px;
font-size:18px;
resize:none;
min-height:110px;
box-sizing:border-box;
}

button{
width:100%;
margin-top:14px;
padding:16px;
font-size:20px;
border:none;
border-radius:18px;
background:#5c746a;
color:#fff;
}

.card{
background:#fff;
border-radius:18px;
padding:18px;
margin-top:20px;
box-shadow:0 4px 10px rgba(0,0,0,.05);
}

.big{
font-size:24px;
font-weight:600;
margin-bottom:10px;
}

.arti{
margin:10px 0 14px;
font-size:18px;
}

.box{
background:#eef2ef;
padding:14px;
border-radius:14px;
font-size:16px;
line-height:1.6;
}

.tag-sub{color:#2b7cff;font-weight:600}
.tag-verb{color:#e5533d;font-weight:600}
.tag-obj{color:#8e44ff remember;font-weight:600}
.tag-clause{color:#16a085;font-weight:600}
.tag-modal{color:#d35400;font-weight:600}

.stars{
margin-top:12px;
font-size:20px;
color:#f5b301;
}
</style>
</head>

<body>
<div class="container">

<h1>ðŸ§  English Grammar Analyzer</h1>
<div class="sub">Struktur + phrase + POS + tense + naturalness</div>

<textarea id="input" placeholder="Type sentence..."></textarea>
<button onclick="analyze()">Analyze</button>

<div id="result"></div>

</div>

<script>
async function translate(text){
try{
const res=await fetch("https://translate.argosopentech.com/translate",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({
q:text,
source:"en",
target:"id",
format:"text"
})
});
const data=await res.json();
return data.translatedText || "(terjemahan gagal)";
}catch{
return "(terjemahan gagal)";
}
}

function detectTense(s){
if(/could|would|should|might/.test(s)) return "modal past";
if(/was|were|did/.test(s)) return "past";
if(/is|am|are/.test(s)) return "present";
return "unknown";
}

function detectClause(s){
const m=s.match(/because|when|if|that|who|which|while|although/i);
if(!m) return "";
return s.split(m[0])[1]?.trim() || "";
}

function highlight(s){
return s
.replace(/\b(I|you|he|she|they|we)\b/i,'<span class="tag-sub">$1</span>')
.replace(/\b(couldnâ€™t|could|would|should|might)\b/i,'<span class="tag-modal">$1</span>')
.replace(/\b(make|go|take|get|see|know|come|want)\b/i,'<span class="tag-verb">$1</span>')
.replace(/\b(to .*?)(?=\s|$)/i,'<span class="tag-obj">$1</span>')
.replace(/\b(because .*?$)/i,'<span class="tag-clause">$1</span>');
}

function naturalScore(s){
let score=5;
if(s.length<6) score=2;
if(!/[a-z]/i.test(s)) score=1;
return "â­".repeat(score);
}

function rewrite(s){
return s.charAt(0).toUpperCase()+s.slice(1);
}

async function analyze(){
const s=document.getElementById("input").value.trim();
if(!s) return;

const arti=await translate(s);
const tense=detectTense(s);
const clause=detectClause(s);
const hi=highlight(s);
const nat=naturalScore(s);
const natv=rewrite(s);

document.getElementById("result").innerHTML=`
<div class="card">
<div class="big">${hi}</div>

<div class="arti"><b>Arti:</b> ${arti}</div>

<div class="box">
<b>Tense:</b> ${tense}<br>
<b>Clause:</b> ${clause || "-"}<br>
<b>POS:</b> subject / modal / verb / object / clause
</div>

<div class="stars">Naturalness: ${nat}</div>
<div style="margin-top:6px"><b>Native:</b> ${natv}</div>

</div>
`;
}
</script>

</body>
</html>