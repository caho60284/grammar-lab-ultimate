<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>English Grammar Structure Analyzer</title>

<style>
body{
font-family:system-ui,-apple-system,Segoe UI,Roboto;
background:#f4f6f5;
margin:0;
padding:16px;
color:#1f2933;
}

h1{
color:#3b6f5c;
margin-bottom:4px;
}

.subtitle{
color:#6b7c75;
margin-bottom:18px;
}

textarea{
width:100%;
border-radius:14px;
border:1px solid #cfd8d3;
padding:14px;
font-size:18px;
min-height:120px;
box-sizing:border-box;
}

button{
width:100%;
margin-top:14px;
padding:14px;
border:none;
border-radius:16px;
background:#3b6f5c;
color:white;
font-size:18px;
}

.card{
background:white;
border-radius:16px;
padding:14px;
margin-top:16px;
box-shadow:0 2px 6px rgba(0,0,0,0.06);
}

table{
width:100%;
border-collapse:collapse;
font-size:15px;
}

th{
text-align:left;
background:#e8efec;
padding:10px;
}

td{
padding:10px;
border-top:1px solid #edf1ef;
vertical-align:top;
}

.meaning{
background:#e3ece8;
padding:12px;
border-radius:12px;
margin-top:6px;
}

.idiom{
background:#eef3f0;
padding:12px;
border-radius:12px;
margin-top:6px;
}

</style>
</head>
<body>

<h1>English Grammar Structure Analyzer</h1>
<div class="subtitle">Analisis struktur kalimat Inggris lengkap</div>

<textarea id="inputText" placeholder="Ketik kalimat Inggris..."></textarea>
<button onclick="analyze()">Analyze</button>

<div id="result"></div>

<script>

// =========================
// DICTIONARY
// =========================
const pronouns = ["i","you","he","she","we","they","it"]
const beVerbs = ["am","is","are","was","were"]
const modals = ["can","could","will","would","shall","should","may","might","must"]
const adjectives = ["happy","sad","hungry","thirsty","sleepy","tired","late","ready"]
const intensifiers = ["very","so","really","too"]

// translation dictionary
const dict = {
"i":"aku",
"you":"kamu",
"he":"dia",
"she":"dia",
"we":"kami",
"they":"mereka",
"am":"",
"is":"",
"are":"",
"so":"sangat",
"very":"sangat",
"really":"sangat",
"too":"terlalu",
"happy":"senang",
"sad":"sedih",
"hungry":"lapar",
"thirsty":"haus",
"sleepy":"mengantuk",
"tired":"lelah",
"could":"bisa",
"can":"bisa",
"will":"akan",
"make":"membuat",
"it":"itu",
"come":"datang"
}

// idiom dictionary
const idioms = {
"make it":"berhasil / bisa datang",
"come on":"ayo",
"give up":"menyerah",
"look for":"mencari"
}

// =========================
// ANALYZE
// =========================
function analyze(){

let text = document.getElementById("inputText").value.trim()
if(!text) return

let clean = text.replace(/â€™/g,"'")
let words = clean.toLowerCase().split(" ")

let rows = []

// SUBJECT
if(pronouns.includes(words[0])){
rows.push({
seg:words[0],
role:"Subjek utama",
type:"Kata ganti",
exp:"Pelaku utama dalam kalimat"
})
}

// BE VERB
if(beVerbs.includes(words[1])){
rows.push({
seg:words[1],
role:"Kata kerja utama",
type:"Be verb",
exp:"Predikat penghubung subjek dengan sifat"
})
}

// ADJECTIVE PHRASE
let adjIndex = words.findIndex(w=>adjectives.includes(w))
if(adjIndex>-1){
let start = adjIndex-1>=0 && intensifiers.includes(words[adjIndex-1])
? adjIndex-1 : adjIndex

let phrase = words.slice(start,adjIndex+1).join(" ")
rows.push({
seg:phrase,
role:"Pelengkap",
type:"Adjective phrase",
exp:"Menjelaskan keadaan atau sifat subjek"
})
}

// MODAL CLAUSE
let modalIndex = words.findIndex(w=>modals.includes(w))
if(modalIndex>-1){
let clause = words.slice(modalIndex).join(" ")
rows.push({
seg:clause,
role:"Klausa bawahan",
type:"Subordinate clause",
exp:"Informasi tambahan tentang situasi"
})
}

// =========================
// MEANING
// =========================
let normalized = clean
.replace(/I'm/gi,"I am")
.toLowerCase()

let translated = normalized.split(" ").map(w=>{
if(dict[w]) return dict[w]
return w
}).join(" ")


// =========================
// IDIOM
// =========================
let idiomFound = ""
for(let key in idioms){
if(normalized.includes(key)){
idiomFound = key+" = "+idioms[key]
}
}

// =========================
// RENDER
// =========================
let html = `
<div class="card">
<table>
<tr>
<th>Bagian</th>
<th>Peran</th>
<th>Jenis</th>
<th>Penjelasan</th>
</tr>
`

rows.forEach(r=>{
html+=`
<tr>
<td>${r.seg}</td>
<td>${r.role}</td>
<td>${r.type}</td>
<td>${r.exp}</td>
</tr>`
})

html+=`</table></div>`

html+=`
<div class="card">
<b>Meaning kalimat</b>
<div class="meaning">${translated}</div>
</div>
`

if(idiomFound){
html+=`
<div class="card">
<b>Idiom / Phrase</b>
<div class="idiom">${idiomFound}</div>
</div>
`
}

document.getElementById("result").innerHTML = html

}

</script>
</body>
</html>