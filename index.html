<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>English Grammar Analyzer</title>

<style>
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial;
  background:#f3f5f4;
  display:flex;
  justify-content:center;
}

.container{
  width:100%;
  max-width:520px;
  padding:20px 16px 40px;
}

h1{
  margin:0;
  font-size:32px;
  color:#2f4f44;
}

.subtitle{
  color:#7a8a85;
  margin:6px 0 18px;
  font-size:16px;
}

textarea{
  width:100%;
  border-radius:16px;
  border:2px solid #d7dfdb;
  padding:16px;
  font-size:18px;
  resize:none;
  box-sizing:border-box;
}

button{
  width:100%;
  margin-top:16px;
  padding:16px;
  border:none;
  border-radius:16px;
  background:#486e60;
  color:white;
  font-size:20px;
  font-weight:600;
}

.result{
  margin-top:20px;
  background:white;
  padding:18px;
  border-radius:18px;
  box-shadow:0 2px 6px rgba(0,0,0,0.08);
}

.corrected{
  font-weight:700;
  font-size:20px;
  margin-bottom:10px;
}

.meaning{
  margin-top:10px;
  font-size:18px;
}

.grammar{
  margin-top:14px;
  padding:12px;
  background:#eef3f1;
  border-radius:12px;
  font-size:15px;
  line-height:1.5;
}
</style>
</head>

<body>

<div class="container">
  <h1>ðŸ§  English Grammar Analyzer</h1>
  <div class="subtitle">Analisis struktur + phrase + noun phrase</div>

  <textarea id="input" rows="3" placeholder="Ketik kalimat..."></textarea>
  <button onclick="analyze()">Analyze</button>

  <div id="output"></div>
</div>

<script>
async function translate(text){
  try{
    const res = await fetch("https://api.mymemory.translated.net/get?q="+encodeURIComponent(text)+"&langpair=en|id");
    const data = await res.json();
    return data.responseData.translatedText;
  }catch{
    return "";
  }
}

function detectTense(s){
  if(/will/.test(s)) return "Future";
  if(/could|would|should|might|may/.test(s)) return "Modal";
  if(/did|was|were|had|went|made|took/.test(s)) return "Past";
  if(/am|is|are/.test(s)) return "Present";
  return "Unknown";
}

function grammarBreakdown(sentence){
  const words = sentence.split(" ");
  const subject = words[0] || "";
  const verb = words[1] || "";
  const object = words.slice(2).join(" ");

  return `
    <div class="grammar">
      <b>Tense:</b> ${detectTense(sentence)}<br>
      <b>Subject:</b> ${subject}<br>
      <b>Verb:</b> ${verb}<br>
      <b>Object / Phrase:</b> ${object}
    </div>
  `;
}

async function analyze(){
  const text = document.getElementById("input").value.trim();
  if(!text) return;

  const corrected = text.charAt(0).toUpperCase()+text.slice(1);
  const meaning = await translate(corrected);

  document.getElementById("output").innerHTML = `
    <div class="result">
      <div class="corrected">${corrected}</div>
      <div class="meaning"><b>Arti:</b> ${meaning}</div>
      ${grammarBreakdown(corrected)}
    </div>
  `;
}
</script>

</body>
</html>